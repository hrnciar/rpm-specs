# Generated by go2rpm
%bcond_without check

# https://github.com/mmarkdown/mmark
%global goipath         github.com/mmarkdown/mmark
Version:                2.0.46

%gometa

%global common_description %{expand:
Mmark is a powerful markdown processor written in Go, geared towards writing
IETF documents. It is, however, also suited for writing complete books and other
technical documentation, like the Learning Go book (mmark source, and I-D text
output).}

%global golicenses      LICENSE.txt
%global godocs          README.md Syntax.md mmark.1.md

Name:           %{goname}
Release:        4%{?dist}
Summary:        Powerful markdown processor in Go geared towards the IETF

# Upstream license specification: BSD-2-Clause
License:        BSD
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(github.com/BurntSushi/toml)
BuildRequires:  golang(github.com/gomarkdown/markdown)
BuildRequires:  golang(github.com/gomarkdown/markdown/ast)
BuildRequires:  golang(github.com/gomarkdown/markdown/html)
BuildRequires:  golang(github.com/gomarkdown/markdown/parser)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/google/go-cmp/cmp)
%endif

# Remove after F34.
Obsoletes: golang-github-miekg-mmark < 1.3.6-3
Provides: golang-github-miekg-mmark = %{version}-%{release}

%description
%{common_description}

%gopkg

%prep
%goprep

%build
%gobuild -o %{gobuilddir}/bin/mmark %{goipath}

%install
%gopkginstall
install -m 0755 -vd                     %{buildroot}%{_bindir}
install -m 0755 -vp %{gobuilddir}/bin/* %{buildroot}%{_bindir}/

%if %{with check}
%check
%gocheck
%endif

%files
%license LICENSE.txt
%doc README.md Syntax.md mmark.1.md
%{_bindir}/*

%gopkgfiles

%changelog
* Wed Jan 29 2020 Fedora Release Engineering <releng@fedoraproject.org> - 2.0.46-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Wed Oct 30 2019 Elliott Sales de Andrade <quantum.analyst@gmail.com> - 2.0.46-3
- Obsolete golang-github-miekg-mmark, which provided the same executable

* Thu Jul 25 2019 Fedora Release Engineering <releng@fedoraproject.org> - 2.0.46-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_31_Mass_Rebuild

* Mon Jun 03 16:11:39 CEST 2019 Robert-Andr√© Mauchin <zebob.m@gmail.com> - 2.0.46-1
- Initial package
