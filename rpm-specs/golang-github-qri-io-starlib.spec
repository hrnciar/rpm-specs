# Generated by go2rpm 1
%bcond_without check

# https://github.com/qri-io/starlib
%global goipath         github.com/qri-io/starlib
Version:                0.4.2

%gometa

%global common_description %{expand:
Qri's standard library for starlark.}

%global golicenses      LICENSE
%global godocs          CHANGELOG.md README.md

%global gosupfiles      ${star[@]}

Name:           %{goname}
Release:        1%{?dist}
Summary:        Qri's standard library for starlark

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}
# Fix updated excelize api
Patch0:         https://github.com/qri-io/starlib/commit/cfe3c5209ffb07e5add23998c6ca789c2cf400bf.patch#/0001-fix-updated-excelize-api.patch

BuildRequires:  golang(github.com/360EntSecGroup-Skylar/excelize)
BuildRequires:  golang(github.com/dustmop/soup)
BuildRequires:  golang(github.com/paulmach/orb)
BuildRequires:  golang(github.com/paulmach/orb/geo)
BuildRequires:  golang(github.com/paulmach/orb/geojson)
BuildRequires:  golang(github.com/paulmach/orb/planar)
BuildRequires:  golang(github.com/pkg/errors)
BuildRequires:  golang(github.com/PuerkitoBio/goquery)
BuildRequires:  golang(go.starlark.net/starlark)
BuildRequires:  golang(go.starlark.net/starlarkstruct)
BuildRequires:  golang(go.starlark.net/syntax)
BuildRequires:  golang(golang.org/x/net/html)
BuildRequires:  golang(gopkg.in/yaml.v2)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/stretchr/testify/assert)
BuildRequires:  golang(go.starlark.net/resolve)
BuildRequires:  golang(go.starlark.net/starlarktest)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
%patch0 -p1

%install
mapfile -t star <<< $(find . -name "*.star" -type f)
%gopkginstall

%if %{with check}
%check
%gocheck -d bsoup -d math -d util
%endif

%gopkgfiles

%changelog
* Mon Jul 06 20:00:17 CEST 2020 Robert-AndrÃ© Mauchin <zebob.m@gmail.com> - 0.4.2-1
- Initial package
