# Generated by go2rpm 1
%bcond_without check

# https://github.com/ua-parser/uap-go
%global goipath         github.com/ua-parser/uap-go
%global commit          daf92ba38329329419decc8e322bcd9480964294
%global uap_core_commit 286809e09706ea891b9434ed875574d65e0ff6b7
%gometa

%global common_description %{expand:
Go implementation of ua-parser.}

%global golicenses      LICENSE uaparser/uaparser-LICENSE.md
%global godocs          README.md

Name:           %{goname}
Version:        0
Release:        2%{?dist}
Summary:        Go implementation of ua-parser

BuildArch:      noarch

# Upstream license specification: Apache-2.0 and MIT
License:        ASL 2.0 and MIT
URL:            %{gourl}
Source0:        %{gosource}

# uap-core is included as a git subrepository in upstream, only required to run the tests
Source1:        https://github.com/ua-parser/uap-core/archive/%{uap_core_commit}/uap-core-%{uap_core_commit}.tar.gz

BuildRequires:  golang(gopkg.in/yaml.v2)

%description
%{common_description}

%gopkg

%prep
%goprep

# unpack uap-core git subdirectory, only required to run tests
tar xfz %{SOURCE1}
cp uap-core-%{uap_core_commit}/regexes.yaml uap-core
cp -r uap-core-%{uap_core_commit}/test_resources uap-core
cp -r uap-core-%{uap_core_commit}/tests uap-core
rm -r uap-core-%{uap_core_commit}

# rename license file (colliding filenames)
mv uaparser/LICENSE.md uaparser/uaparser-LICENSE.md

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
* Wed Jan 29 2020 Fedora Release Engineering <releng@fedoraproject.org> - 0-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Tue Sep 03 16:54:40 CEST 2019 Andreas Gerstmayr <agerstmayr@redhat.com> - 0-1.20190903gitdaf92ba
- Initial package

