# Generated by go2rpm 1
# Requires a running Elasticsearch instance
%bcond_with check

# https://github.com/olivere/elastic
%global gourl           https://gopkg.in/olivere/elastic.v5
%global goipath         gopkg.in/olivere/elastic.v5
%global forgeurl        https://github.com/olivere/elastic
Version:                5.0.84

%gometa

%global common_description %{expand:
Elasticsearch 5 client for Go.}

%global golicenses      LICENSE LICENSE-uritemplates
%global godocs          CONTRIBUTING.md  CODE_OF_CONDUCT.md\\\
                        CONTRIBUTORS README.md CHANGELOG-3.0.md\\\
                        CHANGELOG-5.0.md README-cluster-test.md

Name:           %{goname}
Release:        1%{?dist}
Summary:        Elasticsearch 5 client for Go

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(github.com/aws/aws-sdk-go/aws/credentials)
BuildRequires:  golang(github.com/aws/aws-sdk-go/aws/signer/v4)
BuildRequires:  golang(github.com/google/uuid)
BuildRequires:  golang(github.com/mailru/easyjson)
BuildRequires:  golang(github.com/olivere/env)
BuildRequires:  golang(github.com/opentracing/opentracing-go)
BuildRequires:  golang(github.com/pkg/errors)
BuildRequires:  golang(github.com/smartystreets/go-aws-auth)
BuildRequires:  golang(github.com/uber/jaeger-client-go/config)
BuildRequires:  golang(github.com/uber/jaeger-client-go/log)
BuildRequires:  golang(github.com/uber/jaeger-lib/metrics/expvar)
BuildRequires:  golang(go.opencensus.io/trace)
BuildRequires:  golang(golang.org/x/sync/errgroup)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/fortytw2/leaktest)
BuildRequires:  golang(github.com/google/go-cmp/cmp)
BuildRequires:  golang(github.com/opentracing/opentracing-go/mocktracer)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
mv %{_builddir}/elastic-%{version}/uritemplates/LICENSE LICENSE-uritemplates
mv %{_builddir}/elastic-%{version}/cluster-test/README.md README-cluster-test.md

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
* Tue Apr 07 2020 Fabian Affolter <mail@fabian-affolter.ch> - 5.0.84-1
- Initial package
