# Generated by go2rpm
%bcond_without check

# https://github.com/go-resty/resty
%global goipath         gopkg.in/resty.v1
%global forgeurl        https://github.com/go-resty/resty
Version:                1.12.0

%gometa

%global common_description %{expand:
Package Resty provides Simple HTTP and REST client library for Go.}

%global golicenses      LICENSE
%global godocs          README.md .testdata/text-file.txt

Name:           %{goname}
Release:        4%{?dist}
Summary:        Simple HTTP and REST client library for Go

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(golang.org/x/net/publicsuffix)

%description
%{common_description}

%gopkg

%prep
%goprep
# https://github.com/go-resty/resty/issues/308
sed -i 's|Get /redirect-21|Get \\\"/redirect-21\\\"|' client_test.go
sed -i 's|"Get "+ts.URL+"/"|"Get \\\""+ts.URL+"/\\\""|' context_test.go
sed -i 's|Get /redirect-2|Get \\\"/redirect-2\\\"|' request_test.go
sed -i 's|Get /redirect-11|Get \\\"/redirect-11\\\"|' request_test.go
sed -i 's|parse //not.a.user@%66%6f%6f.com/just/a/path/also|parse \\\"//not.a.user@%66%6f%6f.com/just/a/path/also\\\"|' request_test.go
sed -i 's|"Get "+ts.URL+"/set-retrycount-test"|"Get \\\""+ts.URL+"/set-retrycount-test\\\""|' retry_test.go



%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
* Wed Jan 29 2020 Fedora Release Engineering <releng@fedoraproject.org> - 1.12.0-4
- Rebuilt for https://fedoraproject.org/wiki/Fedora_32_Mass_Rebuild

* Thu Jul 25 2019 Fedora Release Engineering <releng@fedoraproject.org> - 1.12.0-3
- Rebuilt for https://fedoraproject.org/wiki/Fedora_31_Mass_Rebuild

* Sat Apr 27 14:11:15 CEST 2019 Robert-Andr√© Mauchin <zebob.m@gmail.com> - 1.12.0-2
- Update to new macros

* Thu Feb 28 2019 Carl George <carl@george.computer> - 1.12.0-1
- Latest upstream

* Fri Feb 01 2019 Fedora Release Engineering <releng@fedoraproject.org> - 1.10.3-2
- Rebuilt for https://fedoraproject.org/wiki/Fedora_30_Mass_Rebuild

* Wed Dec 05 2018 Carl George <carl@george.computer> - 1.10.3-1
- Latest upstream

* Wed Dec 05 2018 Carl George <carl@george.computer> - 1.10.2-2
- Add patch0 to fix panic on i686

* Tue Nov 27 2018 Carl George <carl@george.computer> - 1.10.2-1
- Initial package
